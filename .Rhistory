p <- opq(bbox = bb) %>%
add_osm_feature(key = 'building', value = 'commercial') %>%
osmdata_sf() %>%
trim_osmdata()
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'building', value = 'commercial') %>%
osmdata_sf() %>%
trim_osmdata(bbpoly = bb)
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'building', value = 'commercial') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p.sf <- p$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf)
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'building', value = 'residential') %>%
osmdata_sf() %>%
trim_osmdata()
p
p.sf <- p$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf)
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'building', value = 'residential') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p.sf <- p$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf, fill = "black")
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'landuse', value = 'brownfield') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p.sf <- p$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf, fill = "black")
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'landuse', value = 'railway') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p.sf <- p$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf, fill = "black")
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'public_transform', value = 'station') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p <- opq(bbox = bb) %>%
add_osm_feature(key = 'public_transport', value = 'station') %>%
osmdata_sf() %>%
trim_osmdata(bb_poly = bb)
p
p.sf <- p$osm_polygons
table(crime.df$`Crime type`)
knitr::opts_chunk$set(echo = TRUE)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
bb <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
bb <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
bikes_sf <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
bikes_sf <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
?getbb
ggplot(data = bb) +
geom_sf
ggplot(data = bb) +
geom_sf()
?opq
bikes_sf
bikes_points_sf <- p$osm_points
ggplot() +
geom_sf(data = bb) +
geom_sf(data = bikes_points_sf)
bikes_points_sf <- bikes_sf$osm_points
ggplot() +
geom_sf(data = bb) +
geom_sf(data = bikes_points_sf)
bikes_sf <- opq(bbox = bb) %>%                                    # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb)                                      # trim
bikes_points_sf <- bikes_sf$osm_points
bikes_sf
bikes_points_sf <- bikes_sf$osm_points
ggplot() +
geom_sf(data = bb) +
geom_sf(data = bikes_points_sf)
ggplot() +
geom_sf(data = bb) +
geom_sf(data = bikes_points_sf, size = 0.5)
bikes_poly_sf <- bikes_sf$osm_polygons
ggplot() +
geom_sf(data = bb) +
geom_sf(data = bikes_poly_sf)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 3
ggplot(data = bb) +
geom_sf()
# Chunk 4
bikes_sf <- opq(bbox = bb) %>%                                    # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb)                                      # trim to bounding box
# Chunk 5
bikes_sf
# Chunk 6
bikes_points_sf <- bikes_sf$osm_points
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
bike.crime.sf <- crime.df %>%
filter(`Crime type` == "Bicycle theft") %>%
drop_na(Longitude, Latitude) %>%
st_as_sf(coords = c(x = "Longitude", y = "Latitude"), crs = 4326) %>%
st_transform(27700) %>%
st_intersection(bb.sf)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 3
ggplot(data = bb_sf) +
geom_sf()
# Chunk 4
bikes_sf <- opq(bbox = bb_sf) %>%                                    # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                      # trim to bounding box
# Chunk 5
bikes_sf
# Chunk 6
bikes_points_sf <- bikes_sf$osm_points
# Chunk 7
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.5)
# Chunk 8
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
bike.crime.sf <- crime.df %>%
filter(`Crime type` == "Bicycle theft") %>%
drop_na(Longitude, Latitude) %>%
st_as_sf(coords = c(x = "Longitude", y = "Latitude"), crs = 4326) %>%
st_transform(27700) %>%
st_intersection(bb_sf)
bikes_points_sf
class(bikes_points_sf)
bikes_points_sf
class(bikes_sf)
bikes_points_sf <- bikes_sf %>%
select(osm_points)
bikes_points_sf <- bikes_sf %>%
dplyr::select(osm_points)
class(bikes_sf)
names(bikes_sf)
bikes_points_sf <- bikes_sf %>%
slice(osm_points)
bikes_points_sf <- bikes_sf %>%
list("osm_points")
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.5)
class(bikes_points_sf)
bikes_points_sf <- bikes_sf$osm_points %>%
st_transform(27700)
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.5)
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon") %>%
st_transform(27700)
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon") %>%
st_transform(27700)
ggplot(data = bb_sf) +
geom_sf()
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
ggplot(data = bb_sf) +
geom_sf()
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
bikes_sf
bikes_points_sf <- bikes_sf$osm_points %>%
st_transform(27700)
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
file.exists(("data/2020-01-metropolitan-street.csv"))
file.exists("data/2020-01-metropolitan-street.csv")
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(colour = "bike_points") +
geom_sf(data = bike.crime.sf, size = 0.1, alpha = 0.5) +
scale_colour_manual(values = c("re"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(colour = "bike_points"), size = 0.3) +
geom_sf(data = bike.crime.sf, mapping = aes(colour = "crimes"), size = 0.1, alpha = 0.5) +
scale_colour_manual(values = c(bike_points = "black", crimes = "red"))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 3
ggplot(data = bb_sf) +
geom_sf()
# Chunk 4
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
# Chunk 5
bikes_sf
# Chunk 6
bikes_points_sf <- bikes_sf$osm_points
# Chunk 7
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.3)
# Chunk 8
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
# Chunk 9
bike.crime.sf <- crime.df %>%
filter(`Crime type` == "Bicycle theft") %>%
drop_na(Longitude, Latitude) %>%
st_as_sf(coords = c(x = "Longitude", y = "Latitude"), crs = 4326) %>%
st_intersection(bb_sf)
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(colour = "bike_points"), size = 0.3) +
geom_sf(data = bike.crime.sf, mapping = aes(colour = "crimes"), size = 0.1, alpha = 0.5) +
scale_colour_manual(values = c(bike_points = "black", crimes = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_points"), size = 0.3) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "crimes"), size = 0.1, alpha = 0.5) +
scale_fill_manual(values = c(bike_points = "black", crimes = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_points"), size = 0.3, pch = 18) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "crimes"), size = 0.1, alpha = 0.5) +
scale_fill_manual(values = c(bike_points = "black", crimes = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_points"), size = 0.3, shape = 21) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "crimes"), size = 0.1, alpha = 0.5, shape = 21) +
scale_fill_manual(values = c(bike_points = "black", crimes = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_points"), size = 0.3, shape = 21) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "crimes"), size = 0.1, alpha = 0.5, shape = 21) +
scale_fill_manual(name = NULL, values = c(bike_points = "black", crimes = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_park"), size = 0.3, shape = 21) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "bike_crime"), size = 0.2, alpha = 0.5, shape = 21) +
scale_fill_manual(name = NULL, values = c(bike_park = "black", bike_crime = "red"))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 3
ggplot(data = bb_sf) +
geom_sf()
# Chunk 4
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
# Chunk 5
bikes_sf
# Chunk 6
bikes_points_sf <- bikes_sf$osm_points
# Chunk 7
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.3)
# Chunk 8
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
# Chunk 9
bike.crime.sf <- crime.df %>%
filter(`Crime type` == "Bicycle theft") %>%
drop_na(Longitude, Latitude) %>%
st_as_sf(coords = c(x = "Longitude", y = "Latitude"), crs = 4326) %>%
st_intersection(bb_sf)
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_park"), size = 0.3, shape = 21) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "bike_crime"), size = 0.2, alpha = 0.5, shape = 21) +
scale_fill_manual(name = NULL, values = c(bike_park = "black", bike_crime = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(fill = "bike_park"), size = 0.5, alpha = 0.5, shape = 21) +
geom_sf(data = bike.crime.sf, mapping = aes(fill = "bike_crime"), size = 0.4, alpha = 0.5, shape = 21) +
scale_fill_manual(name = NULL, values = c(bike_park = "black", bike_crime = "red"))
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, mapping = aes(colour = "bike_park"), size = 0.5, alpha = 0.5, shape = 19) +
geom_sf(data = bike.crime.sf, mapping = aes(colour = "bike_crime"), size = 0.4, alpha = 0.5, shape = 19) +
scale_colour_manual(name = NULL, values = c(bike_park = "black", bike_crime = "red"))
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
bb <- getbb(place_name = "washington dc", format_out = "sf_polygon")
plot(st_geometry(bb))
p <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'building', value = 'parking') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
p
p.sf <- p$osm_points # extract point only
p <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'building', value = 'carport') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
p
p.sf <- p$osm_points # extract point only
p <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'building', value = 'garage') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
p
p.sf <- p$osm_points # extract point only
p
p.sf <- p$osm_points # extract point only
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf)
p <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'building', value = 'parking') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
p
p.sf <- p$osm_points # extract point only
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf)
p <- opq(bbox = bb) %>%                                           # select bounding box
add_osm_feature(key = 'amenity', value = 'bar') %>% # select features
osmdata_sf()                                                    # specify class (sf or sp)
p
p.sf <- p$osm_points # extract point only
ggplot() +
geom_sf(data = bb) +
geom_sf(data = p.sf)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 3
ggplot(data = bb_sf) +
geom_sf()
# Chunk 4
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to bounding box
# Chunk 5
bikes_sf
# Chunk 6
bikes_points_sf <- bikes_sf$osm_points
# Chunk 7
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, size = 0.3)
# Chunk 8
crime.df <- read_csv("data/2020-01-metropolitan-street.csv")
# Chunk 9
bike.crime.sf <- crime.df %>%
filter(`Crime type` == "Bicycle theft") %>%
drop_na(Longitude, Latitude) %>%
st_as_sf(coords = c(x = "Longitude", y = "Latitude"), crs = 4326) %>%
st_intersection(bb_sf)
ggplot() +
geom_sf(data = bb_sf) +
geom_sf(data = bikes_points_sf, aes(colour = "bike_park"), size = 0.4, alpha = 0.5) +
geom_sf(data = bike.crime.sf, aes(colour = "bike_crime"), size = 0.3, alpha = 0.5) +
scale_colour_manual(name = NULL, values = c(bike_park = "black", bike_crime = "red")) +
theme(legend.position = "bottom")
bb_sf
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 2
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
bb_sf
?opq
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'amenity', value = 'bicycle_parking') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)                                   # trim to region
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(osmdata)
library(ggplot2)
library(sf)
library(readr)
library(dplyr)
library(tidyr)
# Chunk 3
bb_sf <- getbb(place_name = "greater london united kingdom", format_out = "sf_polygon")
# Chunk 4
ggplot(data = bb_sf) +
geom_sf()
bikes_sf <- opq(bbox = bb_sf) %>%                                 # select bounding box
add_osm_feature(key = 'highway', value = 'bus_stop') %>% # select features
osmdata_sf() %>%                                                # specify class
trim_osmdata(bb_poly = bb_sf)
bikes_points_sf <- bikes_sf$osm_points
View(bikes_points_sf)
install.packages("osmdata")
?dplyr::arrange
arrange(c(1, 3, 2, 4, 6))
library(dplyr)
arrange(c(1, 3, 2, 4, 6))
df <- c(1, 2,3, NA, 5, 3, 1, 4, NA)
df <- data.frame(a = c(1, 2,3, NA, 5, 3, 1, 4, NA), b = c(3, 4, 1, 2, 3, 6, NA, 3, 5))
df %>% arrange(a, b)
df <- data.frame(a = c(1, 2,3, NA, 5, 3, 1, 4, NA), b = c(3, 4, 1, 2, 3, 6, NA, 3, 5), b = c(3, 1, 2, 5, NA, 6, 6, 3, 5))
df %>% arrange(a, b, c)
df <- data.frame(a = c(1, 2,3, NA, 5, 3, 1, 4, NA), b = c(3, 4, 1, 2, 3, 6, NA, 3, 5), c = c(3, 1, 2, 5, NA, 6, 6, 3, 5))
df %>% arrange(a, b, c)
View(df)
df %>% arrange(a, b, c)
